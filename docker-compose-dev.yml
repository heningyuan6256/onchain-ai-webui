# Do not edit this file directly. Use a ‘docker-compose.override.yaml’ file if you can.
# Refer to `docker-compose.override.yaml.example’ for some sample configurations.

services:
  api:
    container_name: LibreChat
    ports:
      - "4000:3080"
    image: librechat:latest
    restart: always
    environment:
      - HOST=0.0.0.0
      - MONGO_URI=mongodb://192.168.0.106:27017/LibreChat
      - MEILI_HOST=http://192.168.0.106:7700
      - RAG_PORT=${RAG_PORT:-8000}
      - RAG_API_URL=http://rag_api:${RAG_PORT:-8000}
      - NODE_ENV=development  # Allow cookies to be transmitted over HTTP, avoiding login issues due to missing cookies
    env_file:
      - .env
    volumes:
      - type: bind
        source: ./.env
        target: /app/.env
      - ./images:/app/client/public/images
      - ./uploads:/app/uploads
      - ./logs:/app/logs
      - type: bind
        source: ./librechat.yaml
        target: /app/librechat.yaml